/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C3*/SET SCHEMA PUBLIC
create sequence Concert_SEQ start with 1 increment by 50
create sequence Genre_SEQ start with 1 increment by 50
create sequence Notification_SEQ start with 1 increment by 50
create sequence Ticket_SEQ start with 1 increment by 50
create sequence TicketOffre_SEQ start with 1 increment by 50
create table Artiste (id bigint generated by default as identity (start with 1), adresse varchar(255), nom varchar(255), prenom varchar(255), style varchar(255), primary key (id))
create table artiste_concert (artiste_id bigint not null, concert_id bigint not null, primary key (artiste_id, concert_id))
create table Concert (capacity integer, popularity integer, price float(53), valide boolean not null, date timestamp(6), genre_id bigint, id bigint not null, description varchar(255), image varchar(255), location varchar(255), title varchar(255), primary key (id))
create table concert_artiste (artiste_id bigint not null, concert_id bigint not null, primary key (artiste_id, concert_id))
create table Genre (id bigint not null, name varchar(255), primary key (id))
create table Notification (id bigint not null, primary key (id))
create table Role (id bigint generated by default as identity (start with 1), name varchar(255), primary key (id))
create table Ticket (cancelled boolean not null, date date, discount float(53), nbrRestant integer, price float(53), concert_id bigint, id bigint not null, user_id bigint, ticket_type varchar(31) not null, description varchar(255), place varchar(255), statut varchar(255), primary key (id))
create table TicketOffre (price float(53), quantityAvailable integer not null, concert_id bigint, id bigint not null, description varchar(255), type varchar(255), primary key (id))
create table User (age integer not null, id bigint generated by default as identity (start with 1), address varchar(255), city varchar(255), email varchar(255), name varchar(255), name_entreprise varchar(255), password varchar(255), phone varchar(255), primary key (id))
create table user_role (role_id bigint not null, user_id bigint not null, primary key (role_id, user_id))
alter table artiste_concert add constraint FK6jue9fjcdvs7e8u3qbj2r33nr foreign key (concert_id) references Concert
alter table artiste_concert add constraint FKhjpn420s9c604k8an3whsxs5 foreign key (artiste_id) references Artiste
alter table Concert add constraint FKcw3kt0thviggy4ujrcxtdi2sc foreign key (genre_id) references Genre
alter table concert_artiste add constraint FKb27axofe9ktbxj00r8tgclafj foreign key (artiste_id) references Artiste
alter table concert_artiste add constraint FK9k1badky51pgvfyfnuv0parcd foreign key (concert_id) references Concert
alter table Ticket add constraint FKin9kj2wiejns9ptuw1pt351kg foreign key (concert_id) references Concert
alter table Ticket add constraint FKm1xvucrvrnk55qhem8xmvju6h foreign key (user_id) references User
alter table TicketOffre add constraint FKbt96rq2ryk2dl8oi3ni3g8cgc foreign key (concert_id) references Concert
alter table user_role add constraint FK7ir6hi5jr98lclgjgbyxafneu foreign key (role_id) references Role
alter table user_role add constraint FKcnrjdc801vcdj8n017nlriv61 foreign key (user_id) references User
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
INSERT INTO ARTISTE VALUES(1,'125 rue abis','K-MAR','Jules','BOUZZ')
INSERT INTO ARTISTE VALUES(2,'125 boulevard des riches','KALASH','Nice','HESS')
INSERT INTO ROLE VALUES(1,'ORGANISATEUR')
INSERT INTO ROLE VALUES(2,'USER')
INSERT INTO ROLE VALUES(3,'ADMIN')
INSERT INTO USER VALUES(85,1,'14 rue bovins','Rennes-En-Grenouilles','anne@gmail.com','LEFLEUR Anne',NULL,'java','0745869574')
INSERT INTO USER VALUES(45,2,'14 rue jean-boscaux','Rennes','julie@gmail.com','LAROSE Julie',NULL,'anne','0745869564')
INSERT INTO USER VALUES(35,3,'145 avenue leclerc','Brest','julien@gmail.com','MAJOIE Julien',NULL,'majoie','0748569574')
INSERT INTO GENRE VALUES(1,'K-POP')
INSERT INTO GENRE VALUES(2,'RAP')
INSERT INTO GENRE VALUES(3,'CLASSIC')
INSERT INTO CONCERT VALUES(89,56,1235.2E0,FALSE,'2025-04-30 22:00:42.786000',1,1,'Pas de description','a.jpeg','RUE DU PARVIS, RENNES-EN-GRENOUILLES','Concert1')
INSERT INTO USER_ROLE VALUES(1,1)
INSERT INTO USER_ROLE VALUES(2,2)
INSERT INTO USER_ROLE VALUES(3,3)
ALTER SEQUENCE PUBLIC.GENRE_SEQ RESTART WITH 101
ALTER SEQUENCE PUBLIC.CONCERT_SEQ RESTART WITH 51
COMMIT
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
INSERT INTO GENRE VALUES(52,'BUZZ')
INSERT INTO CONCERT VALUES(89,56,1235.2E0,FALSE,'2025-04-30 22:21:15.092000',52,2,'Pas de description','g.jpeg','RUE DU FOI, RENNES','Concert2')
INSERT INTO TICKETOFFRE VALUES(1520.0E0,89,2,1,'Ticketstandard','STANDARD')
ALTER SEQUENCE PUBLIC.GENRE_SEQ RESTART WITH 151
ALTER SEQUENCE PUBLIC.CONCERT_SEQ RESTART WITH 101
ALTER SEQUENCE PUBLIC.TICKETOFFRE_SEQ RESTART WITH 51
COMMIT
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
INSERT INTO GENRE VALUES(102,'BUZZ')
INSERT INTO CONCERT VALUES(89,56,1235.2E0,FALSE,'2025-04-30 22:21:17.297000',102,52,'Pas de description','g.jpeg','RUE DU FOI, RENNES','Concert2')
INSERT INTO TICKETOFFRE VALUES(1520.0E0,89,52,2,'Ticketstandard','STANDARD')
ALTER SEQUENCE PUBLIC.GENRE_SEQ RESTART WITH 201
ALTER SEQUENCE PUBLIC.CONCERT_SEQ RESTART WITH 151
ALTER SEQUENCE PUBLIC.TICKETOFFRE_SEQ RESTART WITH 101
COMMIT
DISCONNECT
